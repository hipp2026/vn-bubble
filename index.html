<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>D√≤ng ti·ªÅn ch·ª©ng kho√°n VN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Inter,Roboto;
  background:#0b0f1a;
  color:#e5e7eb;
}
header{padding:12px 16px;font-size:18px;font-weight:600;}
.card{background:#111827;border-radius:10px;padding:12px;margin:12px 16px;}
table{width:100%;border-collapse:collapse;}
th,td{padding:8px;font-size:14px;text-align:right;}
th{color:#9ca3af;font-weight:500;}
td:first-child,th:first-child{text-align:left;}
.up{color:#22c55e;}
.down{color:#ef4444;}
.tag{padding:4px 8px;border-radius:6px;font-size:12px;font-weight:600;}
.in{background:#064e3b;color:#22c55e;}
.out{background:#7f1d1d;color:#ef4444;}
</style>
</head>
<body>

<header>üìä D√≤ng ti·ªÅn ch·ª©ng kho√°n Vi·ªát Nam</header>

<div class="card" id="market">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div>

<div class="card">
<b>Top ti·ªÅn v√†o (tƒÉng gi√° + GTGD cao)</b>
<table>
<thead><tr><th>M√£</th><th>Gi√°</th><th>KL</th><th>%</th><th>GTGD (t·ª∑)</th></tr></thead>
<tbody id="in"></tbody>
</table>
</div>

<div class="card">
<b>Top ti·ªÅn ra (gi·∫£m gi√° + GTGD cao)</b>
<table>
<thead><tr><th>M√£</th><th>Gi√°</th><th>KL</th><th>%</th><th>GTGD (t·ª∑)</th></tr></thead>
<tbody id="out"></tbody>
</table>
</div>

<script>
// H√†m t√≠nh gi√° tr·ªã giao d·ªãch (GTGD) t·ª∑ ƒë·ªìng
function gtgd(x) {
  return (x.price * x.vol / 1e9).toFixed(1); // t·ª∑ ƒë·ªìng, 1 ch·ªØ s·ªë th·∫≠p ph√¢n
}

fetch("data.json")
  .then(r => {
    if (!r.ok) throw new Error("Kh√¥ng t·∫£i ƒë∆∞·ª£c data.json");
    return r.json();
  })
  .then(d => {
    const stocks = d.stocks;

    // S·∫Øp x·∫øp theo GTGD tuy·ªát ƒë·ªëi gi·∫£m d·∫ßn, ph√¢n lo·∫°i theo chi·ªÅu gi√°
    const moneyIn = stocks
      .filter(x => x.p > 0)
      .sort((a, b) => b.price * b.vol - a.price * a.vol)
      .slice(0, 10);

    const moneyOut = stocks
      .filter(x => x.p < 0)
      .sort((a, b) => b.price * b.vol - a.price * a.vol)
      .slice(0, 10);

    // C·∫≠p nh·∫≠t th√¥ng tin th·ªã tr∆∞·ªùng
    document.getElementById("market").innerHTML = `
      <b>${d.market.name}</b><br>
      T·ªïng GTGD to√†n s√†n: <b>${d.market.total.toLocaleString()} t·ª∑ ƒë·ªìng</b>
    `;

    // Top ti·ªÅn v√†o
    document.getElementById("in").innerHTML = moneyIn.map(x => `
      <tr>
        <td><b>${x.s}</b></td>
        <td>${x.price.toLocaleString()}</td>
        <td>${(x.vol/1000).toFixed(0)}K</td>
        <td class="up">+${x.p}%</td>
        <td><span class="tag in">${gtgd(x)}</span></td>
      </tr>
    `).join("") || "<tr><td colspan='5'>Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>";

    // Top ti·ªÅn ra
    document.getElementById("out").innerHTML = moneyOut.map(x => `
      <tr>
        <td><b>${x.s}</b></td>
        <td>${x.price.toLocaleString()}</td>
        <td>${(x.vol/1000).toFixed(0)}K</td>
        <td class="down">${x.p}%</td>
        <td><span class="tag out">${gtgd(x)}</span></td>
      </tr>
    `).join("") || "<tr><td colspan='5'>Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>";

  })
  .catch(err => {
    document.getElementById("market").innerHTML = "L·ªói t·∫£i d·ªØ li·ªáu: " + err.message;
  });
</script>

</body>
</html>