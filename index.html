<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>D√≤ng ti·ªÅn ch·ª©ng kho√°n VN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Inter,Roboto;
  background:#0b0f1a;
  color:#e5e7eb;
}
header{padding:12px 16px;font-size:18px;font-weight:600;}
.card{background:#111827;border-radius:10px;padding:12px;margin:12px 16px;}
table{width:100%;border-collapse:collapse;}
th,td{padding:8px;font-size:14px;text-align:right;}
th{color:#9ca3af;font-weight:500;}
td:first-child,th:first-child{text-align:left;}
.up{color:#22c55e;}
.down{color:#ef4444;}
.tag{padding:2px 6px;border-radius:6px;font-size:12px;}
.in{background:#052e1b;color:#22c55e;}
.out{background:#3f1d1d;color:#ef4444;}
.loading{color:#9ca3af;font-size:14px;}
</style>
</head>
<body>

<header>üìä D√≤ng ti·ªÅn ch·ª©ng kho√°n Vi·ªát Nam</header>

<div class="card" id="market">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div>

<div class="card">
<b>Top ti·ªÅn v√†o</b>
<table>
<thead><tr><th>M√£</th><th>GTGD</th><th>%</th><th>Ti·ªÅn</th></tr></thead>
<tbody id="in"></tbody>
</table>
</div>

<div class="card">
<b>Top ti·ªÅn ra</b>
<table>
<thead><tr><th>M√£</th><th>GTGD</th><th>%</th><th>Ti·ªÅn</th></tr></thead>
<tbody id="out"></tbody>
</table>
</div>

<script>
function money(x){
  return x.price * x.vol * x.p / 100 / 1e9; // t·ª∑ ƒë·ªìng
}
function tag(v){
  return v>0
    ? '<span class="tag in">V√ÄO</span>'
    : '<span class="tag out">RA</span>';
}

fetch("data.json")
.then(r=>r.json())
.then(d=>{
  const list = d.stocks.map(x=>{
    return {...x, m: money(x)};
  });

  const moneyIn = [...list].filter(x=>x.m>0).sort((a,b)=>b.m-a.m);
  const moneyOut = [...list].filter(x=>x.m<0).sort((a,b)=>a.m-b.m);

  market.innerHTML = `
    <b>${d.market.HOSE}</b><br>
    T·ªïng GTGD: <b>${d.market.23500.toLocaleString()} t·ª∑</b>
  `;

  in.innerHTML = moneyIn.map(x=>`
    <tr>
      <td><b>${x.s}</b></td>
      <td>${(x.price*x.vol/1e9).toFixed(1)}</td>
      <td class="up">+${x.p}%</td>
      <td>${tag(x.m)}</td>
    </tr>
  `).join("");

  out.innerHTML = moneyOut.map(x=>`
    <tr>
      <td><b>${x.s}</b></td>
      <td>${(x.price*x.vol/1e9).toFixed(1)}</td>
      <td class="down">${x.p}%</td>
      <td>${tag(x.m)}</td>
    </tr>
  `).join("");
});
</script>

</body>
</html>